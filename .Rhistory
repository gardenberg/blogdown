blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::update_meta_addin()
blogdown:::new_post_addin()
blogdown:::update_meta_addin()
blogdown:::serve_site()
??blogdown
blogdown::new_site(theme="road2stat/hugo-tanka")
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::serve_site()
blogdown:::new_post_addin()
getwd()
suppressPackageStartupMessages(library(tidyverse))
options("scipen"=100)
who_disease <- read_csv("data/who_disease.csv")
who_disease <- read_csv(".../data/who_disease.csv")
who_disease <- read_csv("~/data/who_disease.csv")
who_disease <- read_csv("~/content/data/who_disease.csv")
library(here)
who_disease <- read_csv(here("content\data", "who_disease.csv")
who_disease <- read_csv(here("content/data", "who_disease.csv")
)
disease_counts <- who_disease %>%
mutate(disease = ifelse(disease %in% c('measles', 'mumps'), disease, 'other')) %>%
group_by(disease) %>%
summarise(total_cases = sum(cases))
ggplot(disease_counts, aes(x = 1, y = total_cases, fill = disease)) +
# Use a column geometry.
geom_col()+
# Change coordinate system to polar and set theta to 'y'.
coord_polar(theta="y")+
# Clean up the background with theme_void and give it a proper title with ggtitle.
theme_void()+
ggtitle("Proportion of diseases")
library(waffle)
disease_counts <- who_disease %>%
group_by(disease) %>%
summarise(total_cases = sum(cases)) %>%
mutate(percent = round(total_cases/sum(total_cases)*100))
# Create an array of rounded percentages for diseases.
case_counts <- disease_counts$percent
# Name the percentage array with disease_counts$disease
names(case_counts) = disease_counts$disease
# Pass case_counts vector to the waffle function to plot
waffle(case_counts)
disease_counts <- who_disease %>%
mutate(
disease = ifelse(disease %in% c('measles', 'mumps'), disease, 'other') %>%
factor(levels=c("measles","other","mumps")) # change factor levels to desired ordering
) %>%
group_by(disease, year) %>%
summarise(total_cases = sum(cases))
# add the mapping of year to the x axis.
ggplot(disease_counts, aes(x=year, y = total_cases, fill = disease)) +
# Change the position argument to make bars full height
geom_col(position="fill")
disease_counts <- who_disease %>%
# Filter to on or later than 1999
filter(year>=1999) %>%
mutate(disease = ifelse(disease %in% c('measles', 'mumps'), disease, 'other')) %>%
group_by(disease, region) %>%    # Add region column to grouping
summarise(total_cases = sum(cases))
# Set aesthetics so disease is the stacking variable, region is the x-axis and counts are the y
ggplot(disease_counts, aes(x=region,y=total_cases,fill=disease)) +
# Add a column geometry with the proper position value.
geom_col(position="fill")
blogdown:::serve_site()
install.packages("PxWebApiData")
library(PxWebApiData)
?ApiData
df = ApiData("https://data.ssb.no/api/v0/no/table/12163",
KOKfylkesregion0000 = TRUE,
KOKfunksjon0000 = c("FGF1a", "FGF1b", "FGF1c", "FGF2", "FGF3", "FGF4", "FGF5", "FGF6a", "FGF7", "FGF8"),
KOKart0000 = "AGD10",
ContentsCode = "KOSandel3501",
Tid = "2018"
)
View(df)
alle_data = ApiData("https://data.ssb.no/api/v0/no/table/12163",
KOKfylkesregion0000 = TRUE,
KOKfunksjon0000 = c("FGF1a", "FGF1b", "FGF1c", "FGF2", "FGF3", "FGF4", "FGF5", "FGF6a", "FGF7", "FGF8"),
KOKart0000 = "AGD10",
ContentsCode = "KOSandel3501",
Tid = "2018"
)
df = alle_data[[1]]
View(df)
df = alle_data[[2]]
df = alle_data[[1]]
temp <- filter(df,region=="Oslo fylkeskommune")
View(temp)
df <- alle_data[[1]] %>%
select(.,-art,-statistikkvariabel,`år`)
df <- alle_data[[1]] %>%
select(.,-art,-statistikkvariabel,-`år`)
temp <- filter(df,region=="Oslo fylkeskommune")
ggplot(data = temp, aes(x = 1, y = value, fill = funksjon)) +
geom_col()+
coord_polar(theta="y")+
theme_void()+
ggtitle("Oslo fylkeskommunes pengebruk etter område")
#I tråd med pai-hatet, mangler det en egen geom_pie i ggplot. For å få det til må du derfor summere opp ting til totale antall, plotte dette som et søylediagram, og justere coord_polar til y.
temp <- filter(df,region=="Oslo fylkeskommune")
ggplot(data = temp, aes(x = 1, y = value, fill = funksjon)) +
geom_col()+
coord_polar(theta="y")+
theme_void()+
ggtitle("Oslo fylkeskommunes pengebruk etter område")
temp <- filter(df,region=="Oslo fylkeskommune")%>%
mutate(sum = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel"), funksjon, "Andre"))
temp <- filter(df,region=="Oslo fylkeskommune")%>%
mutate(sum = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"))
temp <- filter(df,region=="Oslo fylkeskommune")%>%
mutate(funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"))%>%
group_by(funksjon_summert)%>%
summarise(andel = sum(value))
temp <- filter(df,region=="Oslo fylkeskommune")%>%
mutate(funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"))
df <- alle_data[[1]]
temp = group_by(df,region)%>%
summarise(andel = sum(value))
View(temp)
df <- alle_data[[1]] %>%
select(.,-art,-statistikkvariabel,-`år`)
#I tråd med pai-hatet, mangler det en egen geom_pie i ggplot. For å få det til må du derfor summere opp ting til totale antall, plotte dette som et søylediagram, og justere coord_polar til y.
temp <- filter(df,region=="Landet uten Oslo")
ggplot(data = temp, aes(x = 1, y = value, fill = funksjon)) +
geom_col()+
coord_polar(theta="y")+
theme_void()+
ggtitle("Oslo fylkeskommunes pengebruk etter område")
temp <- filter(df,region=="Landet uten Oslo")%>%
mutate(funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"))%>%
group_by(funksjon_summert)%>%
summarise(andel = sum(value))
44+31.5+25.1
temp <- filter(df,region=="Landet uten Oslo")%>%
mutate(funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"))%>%
group_by(funksjon_summert)%>%
summarise(andel = sum(value))
ggplot(data = temp, aes(x = 1, y = andel, fill = funksjon_summert)) +
geom_col()+
coord_polar(theta="y")+
theme_void()+
ggtitle("Fylkeskommunal pengebruk etter område", subtitle = "Alle unntatt Oslo")
?waffle
temp <- filter(df,region=="Landet uten Oslo")
View(temp)
temp <- filter(df,region=="Landet uten Oslo")%>%
arrange(.,value)
temp <- filter(df,region=="Landet uten Oslo")%>%
arrange(.,desc(value))
andel_utgifter = temp$value
names(andel_utgifter) = temp$funksjon
waffle(andel_utgifter)
View(temp)
andel_utgifter
library(colorspace)
qualitative_hcl(11,"Dynamic")
waffle(andel_utgifter, colors=qualitative_hcl(11,"Dynamic"))
temp <- filter(df,region=="Landet uten Oslo")%>%
arrange(.,desc(value))%>%
mutate(.,andel = (value/sum(value))*100)
andel_utgifter = temp$value
names(andel_utgifter) = temp$funksjon
waffle(andel_utgifter, colors=qualitative_hcl(11,"Dynamic"))
waffle(andel_utgifter, colors=qualitative_hcl(11,"Dark 3"))
temp <- filter(df,region=="Landet uten Oslo")%>%
arrange(.,desc(value))%>%
mutate(.,andel = round((value/sum(value))*100),0)
temp <- filter(df,region=="Landet uten Oslo")%>%
arrange(.,desc(value))%>%
mutate(.,andel = round((value/sum(value))*100,0)
temp <- filter(df,region=="Landet uten Oslo")%>%
temp <- filter(df,region=="Landet uten Oslo")%>%
arrange(.,desc(value))%>%
mutate(.,andel = round((value/sum(value))*100,0))
sum(temp$andel)
temp <- filter(df,region=="Landet uten Oslo")%>%
arrange(.,desc(value))%>%
mutate(.,andel = round(value,0))
sum(temp$andel)
andel_utgifter = temp$andel
names(andel_utgifter) = temp$funksjon
waffle(andel_utgifter, colors=qualitative_hcl(11,"Dark 3"))
waffle(andel_utgifter, colors=qualitative_hcl(10,"Dark 3"))
waffle(andel_utgifter, colors=qualitative_hcl(10,"Dark 3"), xlab="1 rute = 1 prosent", title= "Fylkeskommunale utgifter etter område")
waffle(andel_utgifter, colors=qualitative_hcl(10,"Dark 3"), xlab="1 rute = 1 prosent", title= "Fylkeskommunale utgifter etter område", legend_pos="bottom")
waffle(andel_utgifter, colors=qualitative_hcl(10,"Dark 3"), xlab="1 rute = 1 prosent", title= "Fylkeskommunale utgifter etter område", legend_pos="right")
?filter
?grep
temp <- filter(df, !grepl("fylkeskommune",region))
View(temp)
temp <- filter(df, grepl("fylkeskommune",region))
View(temp)
temp <- filter(df, grepl("fylkeskommune",region))%>%
mutate(funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"))%>%
group_by(funksjon_summert)%>%
summarise(andel = sum(value))
temp <- filter(df, grepl("fylkeskommune",region))%>%
mutate(funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"))%>%
group_by(region,funksjon_summert)%>%
summarise(andel = sum(value))
temp <- filter(df, grepl("fylkeskommune",region))%>%
mutate(.,funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"))%>%
group_by(.,region,funksjon_summert)%>%
summarise(.,andel = sum(value))%>%
mutate(.,funksjon_summert = factor(levels=c("Videregående opplæring samlet","Samferdsel, fylkeskommune","Andre")))
temp <- filter(df, grepl("fylkeskommune",region))%>%
mutate(.,funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"))%>%
group_by(.,region,funksjon_summert)%>%
summarise(.,andel = sum(value))%>%
mutate(.,funksjon_summert = factor(funksjon_summert,levels=c("Videregående opplæring samlet","Samferdsel, fylkeskommune","Andre")))
temp <- filter(df, grepl("fylkeskommune",region))%>%
mutate(.,
funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"),
funksjon_summert = factor(funksjon_summert,levels=c("Videregående opplæring samlet","Samferdsel, fylkeskommune","Andre"))
)%>%
group_by(.,region,funksjon_summert)%>%
summarise(.,andel = sum(value))
View(temp)
ggplot(data=temp)+
geom_col(aes(x=region,y=andel,fill=funksjon_summert))
ggplot(data=temp)+
geom_col(aes(x=region,y=andel,fill=funksjon_summert),position="fill")
?geom_col
temp <- filter(df, grepl("fylkeskommune",region))%>%
mutate(.,
funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"),
funksjon_summert = factor(funksjon_summert,levels=c("Andre","Samferdsel, fylkeskommune","Videregående opplæring samlet"))
)%>%
group_by(.,region,funksjon_summert)%>%
summarise(.,andel = sum(value))
ggplot(data=temp)+
geom_col(aes(x=region,y=andel,fill=funksjon_summert),position="fill")
?scale_x_discrete
ggplot(data=temp)+
geom_col(aes(x=region,y=andel,fill=funksjon_summert),position="fill") +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
??str_replace
library(stringr)
temp <- filter(df, grepl("fylkeskommune",region))%>%
mutate(.,
funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"),
funksjon_summert = factor(funksjon_summert,levels=c("Andre","Samferdsel, fylkeskommune","Videregående opplæring samlet")),
region = str_replace(region,fixed("fylkeskommune",""))
)%>%
group_by(.,region,funksjon_summert)%>%
summarise(.,andel = sum(value))
temp <- filter(df, grepl("fylkeskommune",region))%>%
mutate(.,
funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"),
funksjon_summert = factor(funksjon_summert,levels=c("Andre","Samferdsel, fylkeskommune","Videregående opplæring samlet")),
region = str_replace(region,fixed("fylkeskommune",replacement=""))
)%>%
group_by(.,region,funksjon_summert)%>%
summarise(.,andel = sum(value))
temp <- filter(df, grepl("fylkeskommune",region))%>%
mutate(.,
funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"),
funksjon_summert = factor(funksjon_summert,levels=c("Andre","Samferdsel, fylkeskommune","Videregående opplæring samlet")),
region = str_replace(region,fixed("fylkeskommune",replacement=" "))
)%>%
group_by(.,region,funksjon_summert)%>%
summarise(.,andel = sum(value))
temp <- filter(df, grepl("fylkeskommune",region))%>%
mutate(.,
funksjon_summert = ifelse(funksjon %in% c("Videregående opplæring samlet","Samferdsel, fylkeskommune"), funksjon, "Andre"),
funksjon_summert = factor(funksjon_summert,levels=c("Andre","Samferdsel, fylkeskommune","Videregående opplæring samlet")),
region = str_replace(region,fixed("fylkeskommune"),replacement=" ")
)%>%
group_by(.,region,funksjon_summert)%>%
summarise(.,andel = sum(value))
ggplot(data=temp)+
geom_col(aes(x=region,y=andel,fill=funksjon_summert),position="fill") +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
blogdown:::serve_site()
